<color=#006e05><link="import">import</link></color> random

<color=#006e05><link="from">from</link></color> <link="Circuit">Circuit</link> <color=#006e05><link="import">import</link></color> <link="Circuit">Circuit</link>


<color=#aaf502><link="class">class</link></color> <color=#006e05>SelectorRoulette</color>:

    <color=#9fff00><link="@staticmethod">@staticmethod</link></color>
    <color=#aaf502><link="def">def</link></color> <color=#7b3fca>get_distributed_weight</color>(generation: <color=#006e05><link="list">list</link></color>[<link="Circuit">Circuit</link>]) -> <color=#006e05><link="list">list</link></color>:
        max_score = <color=#006e05><link="max">max</link></color>(generation, key=<color=#aaf502><link="lambda">lambda</link></color> x: x.score)
        reversed_eval = [max_score.score - x.score + <color=#89b68b>1</color> <color=#aaf502><link="for">for</link></color> x in generation]
        sum_eval = <color=#006e05><link="sum">sum</link></color>(reversed_eval)
        eval_percentage = [x / sum_eval <color=#aaf502><link="for">for</link></color> x in reversed_eval]

        <color=#aaf502><link="for">for</link></color> i in <color=#006e05><link="range">range</link></color>(<color=#006e05><link="len">len</link></color>(eval_percentage) - <color=#89b68b>1</color>):
            eval_percentage[i + <color=#89b68b>1</color>] += eval_percentage[i]

        <color=#aaf502><link="return">return</link></color> eval_percentage

    <color=#9fff00><link="@staticmethod">@staticmethod</link></color>
    <color=#aaf502><link="def">def</link></color> <color=#7b3fca>get_index_for_value</color>(distributed_weights, value):
        <color=#aaf502><link="for">for</link></color> i in <color=#006e05><link="range">range</link></color>(<color=#006e05><link="len">len</link></color>(distributed_weights)):
            <color=#aaf502><link="if">if</link></color> value <= distributed_weights[i]:
                <color=#aaf502><link="return">return</link></color> i

    <color=#aaf502><link="def">def</link></color> <color=#7b3fca>get</color>(<color=#188600><link="self">self</link></color>, generation):
        rand_float = random.random()
        distributed_weights = <color=#188600><link="self">self</link></color>.get_distributed_weight(generation)
        index = <color=#188600><link="self">self</link></color>.get_index_for_value(distributed_weights, rand_float)
        <color=#aaf502><link="return">return</link></color> generation[index]
